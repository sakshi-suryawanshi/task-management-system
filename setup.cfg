# ============================================================================
# Flake8 Configuration for Task Management System
# ============================================================================
# This file configures flake8 for code quality and style enforcement.
# Flake8 combines pycodestyle, pyflakes, and mccabe complexity checker.
#
# Usage:
#   flake8 .                    # Check all files
#   flake8 path/to/file.py     # Check specific file
#
# Documentation: https://flake8.pycqa.org/
# ============================================================================

[flake8]
# Maximum line length (Black uses 88, but we use 100 for better readability)
max-line-length = 100

# Maximum complexity (cyclomatic complexity)
max-complexity = 10

# Exclude patterns (directories and files to ignore)
exclude =
    # Build and distribution
    .git,
    __pycache__,
    .pytest_cache,
    .coverage,
    htmlcov,
    dist,
    build,
    *.egg-info,
    
    # Virtual environments
    venv,
    env,
    .venv,
    ENV,
    
    # Migrations (auto-generated code)
    migrations,
    
    # Static files
    staticfiles,
    static,
    media,
    
    # Documentation
    docs/_build,
    
    # IDE
    .vscode,
    .idea,
    
    # Docker
    .docker,
    
    # Logs
    logs,
    *.log,
    
    # Coverage reports
    coverage.xml,
    .coverage,
    htmlcov,
    
    # Test files (we don't lint test files with same strictness)
    # Note: Test files are still checked, but with relaxed rules
    conftest.py,
    factories.py,
    test_*.py,
    *_test.py

# Ignore specific error codes
# W503: Line break before binary operator (conflicts with Black)
# E203: Whitespace before ':' (conflicts with Black)
# E501: Line too long (handled by max-line-length)
ignore =
    W503,  # Line break before binary operator (Black style)
    E203,  # Whitespace before ':' (Black style)
    E501,  # Line too long (handled by max-line-length)
    W504,  # Line break after binary operator (redundant with W503)

# Per-file ignores (file-specific rule exceptions)
# Format: filename = error-code, error-code
# Example: setup.py = E402

# Show source code for each error
show-source = True

# Count total number of errors
count = True

# Show statistics
statistics = True

# Error format (customize error output)
format = default

# ============================================================================
# Flake8 Plugin Configurations
# ============================================================================

# flake8-docstrings: Docstring style checking
# Documentation: https://pypi.org/project/flake8-docstrings/
[flake8:docstring]
# Docstring convention (google, numpy, sphinx, or None)
docstring-convention = google

# ============================================================================
# Flake8-Bugbear: Finds likely bugs and design problems
# Documentation: https://github.com/PyCQA/flake8-bugbear
# ============================================================================
# Bugbear is enabled by default when installed
# No additional configuration needed

# ============================================================================
# Flake8-Comprehensions: Helps write better comprehensions
# Documentation: https://github.com/adamchainz/flake8-comprehensions
# ============================================================================
# Comprehensions plugin is enabled by default when installed
# No additional configuration needed

# ============================================================================
# Notes
# ============================================================================
# - Black and isort handle code formatting, flake8 handles style enforcement
# - Some flake8 rules are disabled to work with Black (W503, E203)
# - Max line length is 100 (Black default is 88, but we use 100 for readability)
# - Max complexity is 10 (functions with complexity > 10 should be refactored)
# - Migrations are excluded (auto-generated code)
# - Test files are checked but may have relaxed rules

